box: node

build:
  steps:
    - npm-install
    - arjen/hugo-build@1.16.3:
      version: "0.20.7"
      disable_pygments: true

deploy:
  steps:
    - script:
      name: deploy to firebase
      code: |
          node ./node_modules/firebase-tools/bin/firebase use production
          node ./node_modules/firebase-tools/bin/firebase deploy --token $FIREBASE_TOKEN

generate-sessions:
  steps:
    - script:
      name: generate sessions
      code: |
          node ./scripts/generate-sessions-data.js
